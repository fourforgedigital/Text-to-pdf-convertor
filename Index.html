<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Text → PDF (FourForge Digital) Animated Background</title>
  <style>
    @keyframes gradientShift {
      0% {
        background-position: 0% 50%;
      }
      50% {
        background-position: 100% 50%;
      }
      100% {
        background-position: 0% 50%;
      }
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    body {
      font-family: system-ui, Segoe UI, Roboto, Helvetica, Arial;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 24px;
      background: linear-gradient(-45deg, #6a11cb, #2575fc, #6a11cb, #2575fc);
      background-size: 400% 400%;
      animation: gradientShift 15s ease infinite;
      margin: 0;
      min-height: 100vh;
      overflow-x: hidden;
    }

    header {
      max-width: 900px;
      width: 100%;
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 20px;
      background: rgba(255, 255, 255, 0.95);
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06);
      position: relative;
      z-index: 1;
    }
    header img {
      height: 60px;
      width: auto;
      border-radius: 8px;
      user-select: none;
    }
    header h1 {
      font-size: 24px;
      font-weight: 600;
      margin: 0;
      font-family: monospace, monospace;
      position: relative;
    }
    .blinking-cursor {
      display: inline-block;
      width: 1px;
      background-color: black;
      margin-left: 3px;
      animation: blink 1s step-start infinite;
      height: 28px;
      vertical-align: bottom;
      position: relative;
      top: 2px;
    }
    main {
      width: 100%;
      max-width: 900px;
      background: rgba(255, 255, 255, 0.95);
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.06);
      z-index: 1;
      display: flex;
      flex-direction: column;
      position: relative;
    }
    textarea {
      width: 100%;
      height: 360px;
      font-family: monospace;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      resize: vertical;
      box-sizing: border-box;
    }
    input[type=text] {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      margin-top: 12px;
      font-size: 13px;
      box-sizing: border-box;
    }
    .row {
      display: flex;
      gap: 8px;
      margin-top: 12px;
      flex-wrap: wrap;
    }
    button {
      padding: 10px 14px;
      border-radius: 8px;
      border: 0;
      cursor: pointer;
      font-size: 14px;
      position: relative;
      z-index: 1;
      transition: background-color 0.3s ease;
    }
    button:active {
      filter: brightness(0.85);
    }
    .btn-blue {
      background: #2563eb;
      color: white;
    }
    .btn-green {
      background: #16a34a;
      color: white;
    }
    .btn-gray {
      background: #e5e7eb;
    }
    .status {
      margin-top: 12px;
      color: #374151;
    }
    footer {
      margin-top: 28px;
      text-align: center;
      font-size: 12px;
      color: #6b7280;
      padding-top: 12px;
      border-top: 1px solid #e5e7eb;
      max-width: 900px;
      width: 100%;
      position: relative;
      z-index: 1;
    }
    footer span {
      font-weight: 600;
      color: #4f46e5;
      letter-spacing: 0.5px;
    }
    #background-flash {
      position: fixed;
      top: 0;
      left: 0;
      height: 100vh;
      width: 100vw;
      background: white;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      z-index: 0;
    }
    #background-flash.active {
      opacity: 0.3;
      transition: opacity 0.3s ease;
    }
    .FFD{
      text-decoration: none;
      color: #250b0bce; /* Changed from black to blue for better visibility */
    }

    /* Responsive Design */
    @media (max-width: 900px) {
      body {
        padding: 12px;
      }
      header {
        padding: 15px;
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      header img {
        height: 50px;
      }
      header h1 {
        font-size: 20px;
      }
      main {
        padding: 15px;
      }
      textarea {
        height: 280px;
      }
      .row {
        gap: 6px;
      }
      button {
        font-size: 13px;
        padding: 8px 12px;
        flex: 1 1 45%;
      }
      footer {
        font-size: 11px;
        padding-top: 10px;
      }
    }
    @media (max-width: 480px) {
      header {
        align-items: center;
        text-align: center;
      }
      header img {
        height: 40px;
      }
      header h1 {
        font-size: 18px;
      }
      main {
        padding: 10px;
      }
      textarea {
        height: 220px;
      }
      button {
        flex: 1 1 100%;
      }
      .row {
        justify-content: center;
      }
      footer {
        font-size: 10px;
      }
    }
  </style>

  <!-- jsPDF CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <div id="background-flash"></div>

  <header>
    <a href ="https://fourforgedigital.github.io/fourforgedigital/" target="_blank"><img src="FourForage.jpg" alt="Company Logo" class="company-logo" /></a>
    <h1>FourForge Digital<span class="blinking-cursor"></span></h1>
  </header>

  <main>
    <label for="fname">Filename (end with .pdf)</label>
    <input id="fname" type="text" placeholder="my-document.pdf" value="document.pdf">

    <label for="txt" style="margin-top: 10px;">Text</label>
    <textarea id="txt" placeholder="Paste your text here..."></textarea>

    <div class="row">
      <button id="download" class="btn-blue">Download PDF</button>
      <button id="clear" class="btn-gray">Clear</button>
      <button id="copy" class="btn-gray">Copy Text</button>
    </div>

    <div class="status" id="status">Idle — ready.</div>
  </main>

  <footer><a href ="https://fourforgedigital.github.io/fourforgedigital/" target="_blank" class="FFD">
    Designed & Developed by <span class="FFD">FourForge Digital</span></a>
  </footer>

<script>
(async function(){
  const { jsPDF } = window.jspdf;
  const txt = document.getElementById('txt');
  const fname = document.getElementById('fname');
  const status = document.getElementById('status');
  const flash = document.getElementById('background-flash');

  try { txt.value = localStorage.getItem('text_to_pdf') || ''; } catch(e){}

  function saveLocal(){ try{ localStorage.setItem('text_to_pdf', txt.value); }catch(e){} }

  // Trigger background flash animation on button click
  function triggerFlash() {
    if (flash.classList.contains('active')) {
      flash.classList.remove('active');
      void flash.offsetWidth; // trigger reflow
      flash.classList.add('active');
    } else {
      flash.classList.add('active');
    }
  }

  function makeDoc(){
    const doc = new jsPDF({ unit: 'pt', format: 'a4' });
    const margin = 40;
    const pageWidth = doc.internal.pageSize.getWidth();
    const maxLineWidth = pageWidth - margin*2;
    const lines = doc.splitTextToSize(txt.value || ' ', maxLineWidth);
    const lineHeight = 12;
    let y = margin;
    const maxY = doc.internal.pageSize.getHeight() - margin;

    doc.setFont('times','normal');
    doc.setFontSize(12);

    for(let i=0;i<lines.length;i++){
      if (y + lineHeight > maxY) { doc.addPage(); y = margin; }
      doc.text(lines[i], margin, y);
      y += lineHeight;
    }
    return doc;
  }

  document.getElementById('download').onclick = () => {
    triggerFlash();
    if (!txt.value.trim()){ status.textContent = 'Paste some text first '; return; }
    try {
      status.textContent = 'Generating...';
      const doc = makeDoc();
      doc.save(fname.value || 'document.pdf');
      status.textContent = 'Downloaded ';
      saveLocal();
    } catch(err){
      status.textContent = 'Error: ' + err.message;
    }
  };

  document.getElementById('clear').onclick = () => {
    triggerFlash();
    txt.value='';
    saveLocal();
    status.textContent='Cleared.';
  };

  document.getElementById('copy').onclick = async () => {
    triggerFlash();
    try {
      await navigator.clipboard.writeText(txt.value);
      status.textContent='Copied';
    } catch(e){
      status.textContent='Copy failed';
    }
  };

  txt.addEventListener('input', ()=>{ status.textContent='Edited (auto-saved)'; saveLocal(); });

})();
</script>
</body>
</html>
